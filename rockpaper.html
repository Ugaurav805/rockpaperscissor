<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock Paper Scissors</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
      }
      body {
        margin: 60px;
        font-family: "Roboto", sans-serif;
        background-color: rgba(137, 193, 94, 1);
      }
      .game {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      .container {
        background-color: rgba(137, 193, 94, 1);
        border: 2px solid white;
        border-radius: 13px;
        width: 800px;
        height: 158px;
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        margin: auto;
      }
      .list {
        list-style: none;
        font: 40px "Roboto";
        color: rgba(255, 255, 255, 1);
        font-weight: 600;
        line-height: 36.88px;
        letter-spacing: 10%;
      }
      .score {
        display: flex;
        gap: 50px;
      }
      .YourScore,
      .computerScore {
        background-color: rgba(255, 255, 255, 1);
        width: 139px;
        height: 128px;
        border-radius: 9px;
        padding: 5px;
        text-align: center;
        font: 15px "Roboto";
      }
      .p-count,
      .c-count {
        font-size: 68px;
        font-weight: 700;
        text-align: center;
      }
      .button-container {
        display: flex;
        justify-content: center;
        gap: 25px;
      }
      #rulesButton {
        position: absolute;
        width: 122px;
        height: 45px;
        top: 623px;
        left: 1265px;
        border-radius: 13px;
        border: 4px solid white;
        background-color: rgba(137, 193, 94, 1);
        font-weight: 600;
        font-size: x-large;
        color: white;
      }
      #nextButton {
        display: none;
        position: absolute;
        width: 122px;
        height: 45px;
        top: 623px;
        left: 1390px;
        border-radius: 13px;
        border: 4px solid white;
        background-color: rgba(137, 193, 94, 1);
        font-weight: 600;
        font-size: x-large;
        color: white;
      }
      .popup {
        display: none;
        position: absolute;
        top: 222px;
        left: 1166px;
        width: 303px;
        height: 367px;
        background-color: #004429;
        border: 9px solid white;
        border-radius: 8px;
        z-index: 1000;
      }
      .popup-content {
        padding: 20px;
        border-radius: 18px;
      }
      .close-button {
        color: #f50101;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
      }
      .insidebox {
        margin: 1em 0;
        color: rgba(255, 255, 255, 1);
        font-weight: 400;
        font-size: 13px;
        line-height: 17.23px;
        list-style: none;
        padding: 0;
      }
      .insidebox li {
        position: relative;
        padding-left: 20px;
      }
      .insidebox li::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        width: 10px;
        height: 10px;
        background-color: #ffd600;
        border-radius: 2px;
 }
      .Rule {
        text-align: center;
        color: rgba(255, 255, 255, 1);
      }
      .custom-button {
        background-color: #f3f5f7;
        color: white;
        border: 5px;
        height: 150px;
        width: 150px;
        border-radius: 500%;
        padding: 30px 40px;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.2s;
        display: flex;
        justify-content: center;
        margin-top: 1rem;
      }

      .custom-button:active {
        transform: scale(0.95);
      }
      #rock {
        border: 16px solid rgba(0, 116, 182, 1);
      }
      #scissor {
        border: 16px solid rgba(189, 0, 255, 1);
      }
      #paper {
        border: 16px solid rgba(255, 169, 67, 1);
      }
      .result {
        width: 183px;
        height: 36px;
        top: 454px;
        left: 563px;
        font: "roboto";
        font-weight: 800;
        line-height: 45.7px;
        font-size: 1.2rem;
        animation: fadeIn 0.5s;
        text-align: center;
      }
      .chosen-images {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
      }
      .chosen-images img {
        height: 100px;
        width: 100px;
      }
      .reload,
      .new-game {
        display: none;
        margin-top: 2rem;
        padding: 1rem;
        background: green;
        outline: none;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        background: rgba(255, 255, 255, 1);
        color: rgb(0, 0, 0);
        font-size: 15px;
        font-weight: 600;
        line-height: 17.58px;
        width: 174px;
        height: 44px;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <div class="container" id="scoreContainer">
      <div>
        <ul class="list">
          <li>ROCK</li>
          <li>PAPER</li>
          <li>SCISSORS</li>
        </ul>
      </div>
      <div class="score">
        <div class="computerScore">
          <h2>COMPUTER SCORE</h2>
          <p class="c-count count">0</p>
        </div>
        <div class="YourScore">
          <h2>YOUR SCORE</h2>
          <p class="p-count count">0</p>
        </div>
      </div>
    </div>
    <section class="game" id="gameSection">
      <div class="button-container" id="buttonContainer">
        <button class="custom-button" id="rock" aria-label="Choose Rock">
          <img
            src="img/7d8f1b87d406a7bced07190e2c368075.png"
            alt="rock"
            height="64"
            width="64"
          />
        </button>
        <button class="custom-button" id="paper" aria-label="Choose Paper">
          <img
            src="img/879bf162796082bc4c606349436e0c52.png"
            alt="paper"
            height="64"
            width="64"
          />
        </button>
        <button class="custom-button" id="scissor" aria-label="Choose Scissors">
          <img
            src="img/8e9ba336eea3ea7f107fc48755a6b68d.png" alt="scissor" height="64" width="64"/>
        </button>

      </div>
      <div class="result" aria-live="polite"></div>
      <div class="chosen-images"></div>
      <button class="reload" aria-label="Play Again">Play Again</button>
      <button class="new-game" aria-label="New Game">New Game</button>
    </section>
    <button id="rulesButton">RULES</button>
    <button id="nextButton" onclick="location.href='next.html'">NEXT</button>
    <div id="rulesPopup" class="popup">
      <div class="popup-content">
        <span class="close-button" id="closeButton">&times;</span>
        <h1 class="Rule">Game Rules</h1>
        <ul class="insidebox">
          <li>
            Rock beats scissors, scissors beat paper, and paper beats rock.
          </li>
          <br />
          <li>
            Agree ahead of time whether you'll count off "rock, paper, scissors , shoot" or just "rock, paper, scissors".
          </li>
          <br />
          <li>
            Use rock, paper, scissors to settle minor decisions or simply play to pass the time.
          </li>
          <br />
          <li>
            If both players lay down the same hand, each player lays down another hand.
          </li>
        </ul>
      </div>
    </div>

    <script>
      const game = () => {
        let YourScore = 0;
        let computerScore = 0;
        let moves = 0;
        const maxMoves = 30;

        const playGame = () => {
          const rockBtn = document.getElementById("rock");
          const paperBtn = document.getElementById("paper");
          const scissorBtn = document.getElementById("scissor");
          const playerOptions = [rockBtn, paperBtn, scissorBtn];
          const computerOptions = ["rock", "paper", "scissors"];
          const chosenImagesContainer = document.querySelector(".chosen-images");
          const result = document.querySelector(".result");
          const reloadBtn = document.querySelector(".reload");
          const newGameBtn = document.querySelector(".new-game");
          const nextBtn = document.getElementById("nextButton");

          playerOptions.forEach((option) => {
            option.addEventListener("click", function () {
              if (moves < maxMoves) {
                const playerChoice = this.id;
                const choiceNumber = Math.floor(Math.random() * 3);
                const computerChoice = computerOptions[choiceNumber];
                displayChoices(playerChoice, computerChoice);
                determineWinner(playerChoice, computerChoice);
                moves++;
                if (moves === maxMoves) {
                  gameOver();
                } else {
                  hideButtons();
                  reloadBtn.style.display = "block";
                }
              }
            });
          });

          reloadBtn.addEventListener("click", () => {
            resetRound();
          });

          newGameBtn.addEventListener("click", () => {
            resetGame();
          });
        };

        const displayChoices = (playerChoice, computerChoice) => {
          const chosenImagesContainer = document.querySelector(".chosen-images");
          chosenImagesContainer.innerHTML = "";

          const playerImage = document.createElement("img");
          playerImage.src = `img/${playerChoice}.png`;
          playerImage.alt = playerChoice;
          chosenImagesContainer.appendChild(playerImage);

          const computerImage = document.createElement("img");
          computerImage.src = `img/${computerChoice}.png`;
          computerImage.alt = computerChoice;
          chosenImagesContainer.appendChild(computerImage);
        };

        const determineWinner = (You, computer) => {
          You = You.toLowerCase();
          computer = computer.toLowerCase();
          const result = document.querySelector(".result");
          const nextBtn = document.getElementById("nextButton");

          if (You === computer) {
            result.textContent = "It's a Tie!";
            nextBtn.style.display = "none";
          } else if (
            (You === "rock" && computer === "scissors") ||
            (You === "paper" && computer === "rock") ||
            (You === "scissor" && computer === "paper")
          ) {
            result.textContent = "You Won!";
            YourScore++;
            nextBtn.style.display = "block";
          } else {
            result.textContent = "Computer Won!";
            computerScore++;
            nextBtn.style.display = "none";
          }
          updateScores();
        };

        const updateScores = () => {
          document.querySelector(".p-count").textContent = YourScore;
          document.querySelector(".c-count").textContent = computerScore;
        };

        const gameOver = () => {
          const buttonContainer = document.getElementById("buttonContainer");
          buttonContainer.style.display = "none";
          const result = document.querySelector(".result");
          result.textContent += ` Game Over! Final Score - You: ${YourScore}, Computer: ${computerScore}`;
          document.querySelector(".reload").style.display = "block";
          document.querySelector(".new-game").style.display = "block";
        };

        const hideButtons = () => {
          const buttonContainer = document.getElementById("buttonContainer");
          buttonContainer.style.display = "none";
        };

        const resetRound = () => {
          document.querySelector(".result").textContent = "";
          document.querySelector(".chosen-images").innerHTML = ""; 
          document.getElementById("buttonContainer").style.display = "flex"; 
          document.querySelector(".reload").style.display = "none"; 
          document.getElementById("nextButton").style.display = "none";
        };

        const resetGame = () => {
          YourScore = 0;
          computerScore = 0;
          moves = 0;
          updateScores();
          document.querySelector(".result").textContent = "";
          document.querySelector(".chosen-images").innerHTML = ""; 
          document.getElementById("buttonContainer").style.display = "flex"; 
          document.querySelector(".reload").style.display = "none";
          document.querySelector(".new-game").style.display = "none";
          document.getElementById("nextButton").style.display = "none";
        };

        playGame();
      };

      game();
      document.getElementById("rulesButton").onclick = function () {
        document.getElementById("rulesPopup").style.display = "block";
      };

      document.getElementById("closeButton").onclick = function () {
        document.getElementById("rulesPopup").style.display = "none";
      };

      window.onclick = function (event) {
        const popup = document.getElementById("rulesPopup");
        if (event.target === popup) {
          popup.style.display = "none";
        }
      };
    </script>
  </body>
</html>